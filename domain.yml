version: "3.0"

intents:
  - greet
  - rescue
  - donate
  - query
  - affirmation
  - negation
  
responses:
  utter_greet:
  - text: 
  utter_direct:
  - text:
  utter_ask_name: 
  - text: 
  utter_ask_: 

entities:
#Endereço
  - number
  - bairro
  - rua
#Imagem
  - url
#Dados do animal
  # - animal
  # - animal_color
  # - animal_situation
  # - animal_age
  - urgency #(True or false?)

# Forms
forms: 
  rescue_form:

  donate_form: 

  address_form:
    required_slots:
    - address_number
    - address_street
    - address_district
    - address_landmark

# Slots
slots:
#Slots para o endereço
  address_details:
      type: bool
      influence_conversation: true
      mappings:
      - type: custom
  address_number: # numero
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: number
  address_street: # rua
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: rua
  address_district: # bairro
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: bairro
  address_landmark: # ponto de ferencia
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: address_form
        requested_slot: address_landmark

#Slots para o Rescue
  animal_type: # bairro
    type: text
    influence_conversation: true
    mappings:
    - type: custom
  animal_color: # bairro
    type: text
    influence_conversation: true
    mappings:
    - type: custom
  animal_age: # bairro
    type: text
    influence_conversation: true
    mappings:
    - type: custom
  animal_urgency:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_entity
      conditions:
      - active_loop: rescue_form
        requested_slot: animal_urgency


#----------------------- animal ----------------------------------
  url: # url que representa a imagem do animal, o nome do slot deve ser url
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: url
# ----------------------------- ----------------------------------



# Perguntas para os Slots

#Endereço
  utter_address_details:
  - text: |-
      Você conhece os detalhes do endereço?

  utter_submit:
  - text: "{address_details},
           {address_number},
           {address_street},
           {address_district},
           {address_landmark}"

  utter_ask_address_number:
  - text: |-
        Qual o número?

  utter_ask_address_street:
  - text: |-
        Qual a rua?

  utter_ask_address_district:
  - text: |-
      Qual o bairro?

  utter_ask_address_landmark:
  - text: |-
      Qual a referência?

#Rescue
  utter_ask_animal_type:
  - text: |-
      Qual é o animal? (Exemplo: Cachorro, gato...)

  utter_ask_animal_color:
  - text: |-
      Qual é a cor do animal?

  utter_ask_animal_age:
  - text: |-
      Qual é a idade do animal, aproximadamente?

  utter_ask_animal_urgency:
  - text: |-
      Este caso é um caso de urgência?


actions:
  - action_set_address_details_preference



session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
