version: "3.0"

rules:

- rule: Action Session Start
  steps: 
  - action: action_session_start

- rule: Back to square one
  steps:
  - intent: cancel
  - action: utter_cancel
  - action: action_reset_slots
  - action: action_chat_restart


# ativa o formulário
# - rule: activate address form
#   steps:
#     - intent: request_number   # intent that triggers form activation
#     - action: address_form      # run the form
#     - active_loop: number_form # this form is active

# realiza o submit do formulario de endereço
- rule: submit address form
  condition:
  - active_loop: address_form   # this form must be active
  steps:
    - action: address_form      # run the form
    - active_loop: null            # the form is no longer active because it has been filled
    - action: utter_submit         # action to take after the form is complete

# # realiza o submit do formulario de endereço
# - rule: submit contact form
#   condition:
#   - active_loop: contact_form   # this form must be active
#   steps:
#     - action: contact_form      # run the form
#     - active_loop: null            # the form is no longer active because it has been filled

- rule: Implementation of the Two-Stage-Fallback
  steps:
  - intent: nlu_fallback
  - action: action_two_stage_fallback
  - active_loop: action_two_stage_fallback
